## Voron Design VORON2.4  300mm  MKS Monster8 V1.0 TMC2209 UART config
[include MACHINE/*.cfg]
[include KAMP/*cfg]
[include MACROS/macros.cfg]
[include timelapse.cfg]

[pause_resume]

[display_status]

[respond]

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT


[exclude_object]


[force_move]
enable_force_move: True


#####################################################################
#	MCU
#####################################################################

#	MCU
[mcu]
canbus_uuid: 0ee53ec05d88

[mcu rpi]
serial: /tmp/klipper_host_mcu

[idm]
serial:/dev/ttyACM0
restart_method: command

#   Path to the serial port for the idm device. Typically has the form
#   /dev/serial/by-id/usb-idm_idm_...
#canbus_uuid:
speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of idm from the nozzle.
y_offset: 21.1
#   Y offset of idm from the nozzle.
trigger_distance: 2.
#   idm trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default idm model to load.
mesh_main_direction: x
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

#####################################################################
#	Temperature
#####################################################################

#	Raspberry Pi
[temperature_sensor raspberry_pi]
sensor_type:        temperature_host
min_temp:                       0
max_temp:                       80

#	Chamber
[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PC0
min_temp: 0
max_temp: 100
gcode_id: C
#####################################################################
#	Input Shaper
#####################################################################

[input_shaper]
#shaper_freq_x: 46.0
#shaper_type_x: zv
#shaper_freq_y: 28.8
#shaper_type_y: mzv


[lis2dw]
cs_pin: idm:PA3
spi_bus: spi1

[resonance_tester]
accel_chip: lis2dw
#max_freq: 175
accel_per_hz: 100
probe_points:
    150, 150, 20  #set your prefered calibrating position

#####################################################################
#	Printer
#####################################################################
[printer]
kinematics: corexy
max_velocity: 600  
max_accel: 10000   			#Max 4000
max_z_velocity: 30			#Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
square_corner_velocity: 8.0
minimum_cruise_ratio: 0.0


#####################################################################
#   Extruder
#####################################################################

[extruder]

## PID Tuning
#control : pid  
#pid_kp : 26.213 
#pid_ki : 1.304
#pid_kd : 131.721 


#--------------------------------------------------------------------


[heater_bed]
heater_pin: PB10
sensor_type: Generic 3950
sensor_pin: PC1

## PID Tuning
#control: pid
#pid_Kp: 42.066
#pid_Ki: 1.659
#pid_Kd: 266.595

max_power: 0.65
min_temp: 0
max_temp: 120

#####################################################################
#	Save Config
#####################################################################

[include moonraker_obico_macros.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 23.623
#*# pid_ki = 2.218
#*# pid_kd = 62.897
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 34.627
#*# pid_ki = 1.297
#*# pid_kd = 231.133
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 67.2
#*# shaper_type_y = 2hump_ei
#*# shaper_freq_y = 65.0
#*#
#*# [stepper_z]
#*# position_endstop = -0.126
#*#
#*# [idm model default]
#*# model_coef = 1.4110361854613407,
#*# 	  1.8327668461038886,
#*# 	  0.7850035833443602,
#*# 	  0.4464269285216583,
#*# 	  0.31293082159171426,
#*# 	  0.11331366634866692,
#*# 	  -0.19370030847133393,
#*# 	  -0.04004480778342254,
#*# 	  0.2364677939618609,
#*# 	  0.10065496772926166
#*# model_domain = 3.263845529478819e-07,3.3572127939017744e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 40.907022
#*# model_offset = 0.52500
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.004265, -0.000959, 0.001346, 0.001406, 0.001854, 0.001242, 0.001066, 0.001388, -0.000295, -0.000437, -0.002755, -0.004285, -0.005279, -0.008595, -0.010376, -0.011994, -0.015215, -0.018940
#*# 	  -0.002310, -0.001342, -0.001015, 0.000409, 0.000971, 0.000789, 0.000064, -0.001333, -0.000830, -0.002448, -0.002900, -0.005439, -0.004636, -0.009262, -0.009931, -0.011220, -0.016496, -0.016621
#*# 	  -0.001409, 0.000103, 0.000836, 0.001616, 0.001696, 0.001702, 0.000982, -0.000804, -0.000335, -0.001447, -0.001479, -0.004128, -0.005673, -0.007732, -0.009737, -0.010378, -0.013202, -0.016284
#*# 	  -0.001556, -0.001072, 0.000238, 0.000212, 0.001453, 0.000955, -0.001271, -0.001515, -0.002285, -0.003315, -0.003165, -0.006835, -0.007088, -0.007616, -0.010623, -0.010078, -0.013499, -0.016756
#*# 	  -0.002475, -0.000045, 0.000707, 0.001644, 0.000917, 0.001265, -0.000734, -0.001794, -0.002412, -0.002766, -0.004306, -0.005052, -0.007213, -0.008536, -0.009860, -0.010641, -0.013319, -0.016431
#*# 	  -0.003887, -0.002106, -0.001278, -0.001182, -0.000444, -0.001611, -0.002094, -0.002226, -0.004243, -0.003829, -0.005744, -0.005961, -0.008445, -0.009962, -0.010554, -0.012444, -0.016197, -0.017898
#*# 	  -0.002072, -0.001273, -0.000693, 0.000602, -0.000266, 0.000594, -0.000919, -0.001549, -0.001967, -0.004501, -0.005671, -0.006814, -0.007812, -0.009456, -0.010351, -0.012843, -0.013516, -0.016949
#*# 	  -0.004221, -0.002047, -0.002108, -0.000923, -0.001121, -0.000262, -0.001023, -0.004030, -0.002952, -0.006122, -0.005770, -0.008025, -0.009627, -0.010204, -0.011855, -0.013704, -0.015780, -0.017910
#*# 	  -0.003821, -0.001979, -0.001962, -0.001058, 0.000048, -0.000484, -0.001245, -0.002426, -0.004513, -0.004360, -0.006178, -0.008237, -0.009300, -0.010729, -0.011973, -0.013276, -0.014628, -0.019309
#*# 	  -0.003856, -0.001727, -0.001289, -0.001979, -0.001235, -0.000776, -0.001403, -0.003809, -0.004069, -0.006151, -0.005893, -0.007228, -0.010731, -0.011441, -0.012992, -0.012840, -0.016377, -0.018945
#*# 	  -0.003717, -0.003990, -0.001468, -0.001607, -0.001058, -0.001298, -0.002392, -0.001487, -0.004252, -0.006804, -0.006427, -0.009953, -0.010814, -0.010967, -0.013217, -0.014041, -0.017727, -0.018948
#*# 	  -0.005652, -0.004044, -0.004154, -0.002536, -0.002859, -0.004160, -0.003439, -0.004286, -0.005863, -0.006693, -0.008902, -0.010253, -0.011675, -0.012585, -0.013683, -0.014774, -0.018761, -0.019702
#*# 	  -0.005260, -0.004340, -0.003915, -0.003190, -0.002141, -0.003035, -0.002666, -0.004108, -0.004653, -0.007122, -0.008781, -0.010218, -0.012819, -0.012768, -0.013210, -0.015947, -0.016425, -0.019334
#*# 	  -0.004476, -0.003520, -0.003996, -0.002681, -0.001613, -0.002530, -0.001560, -0.004262, -0.003977, -0.006438, -0.007176, -0.009939, -0.011679, -0.011069, -0.013320, -0.015382, -0.016107, -0.019288
#*# 	  -0.003607, -0.001648, -0.001986, -0.000176, -0.001280, -0.001278, -0.001745, -0.002212, -0.003756, -0.005772, -0.007328, -0.009581, -0.010887, -0.010258, -0.011846, -0.013935, -0.015484, -0.018921
#*# 	  -0.003594, -0.003753, -0.001509, -0.001112, -0.001576, -0.000826, -0.001955, -0.002769, -0.004188, -0.006485, -0.006907, -0.008682, -0.009858, -0.010394, -0.010858, -0.012896, -0.016178, -0.018726
#*# 	  -0.002493, -0.001273, -0.001267, -0.000738, -0.001001, -0.001290, -0.001602, -0.002753, -0.003038, -0.006052, -0.005675, -0.008399, -0.010187, -0.010113, -0.011779, -0.013244, -0.015900, -0.016754
#*# x_count = 18
#*# y_count = 17
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 132.195
#*# max_x = 167.805
#*# min_y = 132.537
#*# max_y = 167.463
