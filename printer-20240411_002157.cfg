## Voron Design VORON2.4  300mm  MKS Monster8 V1.0 TMC2209 UART config
[include MACHINE/machine.cfg]
[include KAMP/*cfg]
#[include KLICKY/klicky-probe.cfg]
[include MACROS/macros.cfg]
#[include Expander.cfg]
[include timelapse.cfg]

[pause_resume]

[display_status]

[respond]

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT


[exclude_object]


[force_move]
enable_force_move: True


#####################################################################
#	MCU
#####################################################################

#	MCU
[mcu]
canbus_uuid: 0ee53ec05d88


#	MCU EBBCan
[mcu EBBCan]
canbus_uuid: 5ee53906b31d
#serial:/dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.3:1.0
#restart_method: command

[mcu rpi]
serial: /tmp/klipper_host_mcu
[idm]
serial:/dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.2:1.0

#   Path to the serial port for the idm device. Typically has the form
#   /dev/serial/by-id/usb-idm_idm_...
#canbus_uuid:
speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of idm from the nozzle.
y_offset: 21.1
#   Y offset of idm from the nozzle.
trigger_distance: 2.
#   idm trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default idm model to load.
mesh_main_direction: x
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

#####################################################################
#	Temperature
#####################################################################

#	Raspberry Pi
[temperature_sensor raspberry_pi]
sensor_type:        temperature_host
min_temp:                       0
max_temp:                       80


#	EBB NTC
[temperature_sensor EBB_NTC]
sensor_type: Generic 3950
sensor_pin: EBBCan: PA2

#	Chamber
[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PC0
min_temp: 0
max_temp: 100
gcode_id: C
#####################################################################
#	Input Shaper
#####################################################################

[input_shaper]
#shaper_freq_x: 46.0
#shaper_type_x: zv
#shaper_freq_y: 28.8
#shaper_type_y: mzv


#[adxl345]
#cs_pin: EBBCan: PB12
#spi_software_sclk_pin: EBBCan: PB10
#spi_software_mosi_pin: EBBCan: PB11
#spi_software_miso_pin: EBBCan: PB2
#axes_map: z,-y,x


#[resonance_tester]
#probe_points: 150, 150, 20
#accel_chip: adxl345
[lis2dw]
cs_pin: idm:PA3
spi_bus: spi1

[resonance_tester]
accel_chip: lis2dw
probe_points:
    150, 150, 20  #set your prefered calibrating position

#####################################################################
#	Printer
#####################################################################
[printer]
kinematics: corexy
max_velocity: 600  
max_accel: 10000   			#Max 4000
max_z_velocity: 30			#Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
square_corner_velocity: 8.0
max_accel_to_decel: 5000


#####################################################################
#   Extruder
#####################################################################

[extruder]

## PID Tuning
#control : pid  
#pid_kp : 26.213 
#pid_ki : 1.304
#pid_kd : 131.721 


#--------------------------------------------------------------------


[heater_bed]
heater_pin: PB10
sensor_type: Generic 3950
sensor_pin: PC1

## PID Tuning
#control: pid
#pid_Kp: 42.066
#pid_Ki: 1.659
#pid_Kd: 266.595

max_power: 0.65
min_temp: 0
max_temp: 120

#####################################################################
# 	Probe
#####################################################################
#[probe]
#pin: ^EBBCan:  PB5
#x_offset: 0
#y_offset: 19.75
#y_offset: 45
#z_offset: 0
#speed: 9                     ; probing speed of 5mm/second ideal is <10mm/sec  
#lift_speed: 10              ; probe lift speed (was10)
#samples: 2
#samples_result: median
#sample_retract_dist: 0.7
#samples_tolerance: 0.1
#samples_tolerance_retries: 10
#####################################################################
#	Save Config
#####################################################################

[include moonraker_obico_macros.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 29.554
#*# pid_ki = 3.079
#*# pid_kd = 70.932
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 34.627
#*# pid_ki = 1.297
#*# pid_kd = 231.133
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 56.8
#*# shaper_type_y = zv
#*# shaper_freq_y = 38.8
#*#
#*# [stepper_z]
#*# position_endstop = -0.126
#*#
#*# [idm model default]
#*# model_coef = 1.4110361854613407,
#*# 	  1.8327668461038886,
#*# 	  0.7850035833443602,
#*# 	  0.4464269285216583,
#*# 	  0.31293082159171426,
#*# 	  0.11331366634866692,
#*# 	  -0.19370030847133393,
#*# 	  -0.04004480778342254,
#*# 	  0.2364677939618609,
#*# 	  0.10065496772926166
#*# model_domain = 3.263845529478819e-07,3.3572127939017744e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 40.907022
#*# model_offset = -0.15000
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.094435, -0.088179, -0.083489, -0.078580, -0.077394, -0.070020, -0.065216, -0.060794, -0.056918, -0.052544
#*# 	  -0.094965, -0.091707, -0.085594, -0.083723, -0.078047, -0.072371, -0.068084, -0.063068, -0.060251, -0.056031
#*# 	  -0.100223, -0.096050, -0.091360, -0.087753, -0.082948, -0.076442, -0.072581, -0.067490, -0.063458, -0.059150
#*# 	  -0.103309, -0.100337, -0.094296, -0.092159, -0.087721, -0.080784, -0.076812, -0.073252, -0.069368, -0.064283
#*# 	  -0.109225, -0.104539, -0.099459, -0.096406, -0.090392, -0.085501, -0.079984, -0.077748, -0.073815, -0.068661
#*# 	  -0.109856, -0.107100, -0.102875, -0.098932, -0.094291, -0.087411, -0.084172, -0.079483, -0.076348, -0.072709
#*# 	  -0.113164, -0.110436, -0.105461, -0.101772, -0.097533, -0.091201, -0.086584, -0.082174, -0.078587, -0.073573
#*# 	  -0.116546, -0.115081, -0.109894, -0.107006, -0.101873, -0.096815, -0.091076, -0.087004, -0.083833, -0.078426
#*# 	  -0.123919, -0.119815, -0.115834, -0.110687, -0.107242, -0.100913, -0.095902, -0.092331, -0.089556, -0.084394
#*# 	  -0.125258, -0.121083, -0.115917, -0.112825, -0.109258, -0.103102, -0.097220, -0.094570, -0.089848, -0.086399
#*# 	  -0.126027, -0.122377, -0.116894, -0.114085, -0.109101, -0.103423, -0.100272, -0.094893, -0.091926, -0.087785
#*# 	  -0.128732, -0.125757, -0.120826, -0.116653, -0.113375, -0.105711, -0.101509, -0.099273, -0.096576, -0.091724
#*# 	  -0.134703, -0.131320, -0.126235, -0.123669, -0.117207, -0.111903, -0.107788, -0.104276, -0.100764, -0.097987
#*# x_count = 10
#*# y_count = 13
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 58.5248
#*# min_y = 40.0
#*# max_y = 65.4459
