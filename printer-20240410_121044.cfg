## Voron Design VORON2.4  300mm  MKS Monster8 V1.0 TMC2209 UART config
[include MACHINE/machine.cfg]
[include KAMP/*cfg]
#[include KLICKY/klicky-probe.cfg]
[include MACROS/macros.cfg]
#[include Expander.cfg]
[include timelapse.cfg]

[pause_resume]

[display_status]

[respond]

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT


[exclude_object]


[force_move]
enable_force_move: True


#####################################################################
#	MCU
#####################################################################

#	MCU
[mcu]
canbus_uuid: 0ee53ec05d88


#	MCU EBBCan
[mcu EBBCan]
canbus_uuid: 5ee53906b31d
#serial:/dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.3:1.0
#restart_method: command

[mcu rpi]
serial: /tmp/klipper_host_mcu
[idm]
serial:/dev/ttyACM0

#   Path to the serial port for the idm device. Typically has the form
#   /dev/serial/by-id/usb-idm_idm_...
#canbus_uuid:
speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of idm from the nozzle.
y_offset: 21.1
#   Y offset of idm from the nozzle.
trigger_distance: 2.
#   idm trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default idm model to load.
mesh_main_direction: x
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

#####################################################################
#	Temperature
#####################################################################

#	Raspberry Pi
[temperature_sensor raspberry_pi]
sensor_type:        temperature_host
min_temp:                       0
max_temp:                       80


#	EBB NTC
[temperature_sensor EBB_NTC]
sensor_type: Generic 3950
sensor_pin: EBBCan: PA2

#	Chamber
[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PC0
min_temp: 0
max_temp: 100
gcode_id: C
#####################################################################
#	Input Shaper
#####################################################################

[input_shaper]
#shaper_freq_x: 46.0
#shaper_type_x: zv
#shaper_freq_y: 28.8
#shaper_type_y: mzv


#[adxl345]
#cs_pin: EBBCan: PB12
#spi_software_sclk_pin: EBBCan: PB10
#spi_software_mosi_pin: EBBCan: PB11
#spi_software_miso_pin: EBBCan: PB2
#axes_map: z,-y,x


#[resonance_tester]
#probe_points: 150, 150, 20
#accel_chip: adxl345
[lis2dw]
cs_pin: idm:PA3
spi_bus: spi1

[resonance_tester]
accel_chip: lis2dw
probe_points:
    150, 150, 20  #set your prefered calibrating position

#####################################################################
#	Printer
#####################################################################
[printer]
kinematics: corexy
max_velocity: 600  
max_accel: 10000   			#Max 4000
max_z_velocity: 30			#Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
square_corner_velocity: 8.0
max_accel_to_decel: 5000


#####################################################################
#   Extruder
#####################################################################

[extruder]

## PID Tuning
#control : pid  
#pid_kp : 26.213 
#pid_ki : 1.304
#pid_kd : 131.721 


#--------------------------------------------------------------------


[heater_bed]
heater_pin: PB10
sensor_type: Generic 3950
sensor_pin: PC1

## PID Tuning
#control: pid
#pid_Kp: 42.066
#pid_Ki: 1.659
#pid_Kd: 266.595

max_power: 0.65
min_temp: 0
max_temp: 120

#####################################################################
# 	Probe
#####################################################################
#[probe]
#pin: ^EBBCan:  PB5
#x_offset: 0
#y_offset: 19.75
#y_offset: 45
#z_offset: 0
#speed: 9                     ; probing speed of 5mm/second ideal is <10mm/sec  
#lift_speed: 10              ; probe lift speed (was10)
#samples: 2
#samples_result: median
#sample_retract_dist: 0.7
#samples_tolerance: 0.1
#samples_tolerance_retries: 10
#####################################################################
#	Save Config
#####################################################################

[include moonraker_obico_macros.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 14.822
#*# pid_ki = 0.512
#*# pid_kd = 107.278
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 34.627
#*# pid_ki = 1.297
#*# pid_kd = 231.133
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 52.8
#*# shaper_type_y = mzv
#*# shaper_freq_y = 39.4
#*#
#*# [stepper_z]
#*# position_endstop = -0.151
#*#
#*# [idm model default]
#*# model_coef = 1.565718712465441,
#*# 	1.9980510742406945,
#*# 	0.7751856041706248,
#*# 	0.30067768282349516,
#*# 	0.07037825546610281,
#*# 	0.2796998114908425,
#*# 	0.1043172029890414,
#*# 	-0.29999337953697863,
#*# 	0.038250788951783715,
#*# 	0.17714885547401088
#*# model_domain = 3.32895758795898e-07,3.3659796082195934e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 33.830379
#*# model_offset = 0.17500
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.101178, -0.090524, -0.085591, -0.080137, -0.077093, -0.076494, -0.067545, -0.063818, -0.059514, -0.054483, -0.049858, -0.043638, -0.042391, -0.037483, -0.027390, -0.023392, -0.024120, -0.016742, -0.016917, -0.010193, -0.006599, -0.005328, -0.000872, 0.002731
#*# 	  -0.097721, -0.096879, -0.089906, -0.085503, -0.082510, -0.078229, -0.070366, -0.069169, -0.063027, -0.059296, -0.055226, -0.050287, -0.046379, -0.042285, -0.036386, -0.031244, -0.029793, -0.024773, -0.017923, -0.013649, -0.011038, -0.009949, -0.007433, -0.003715
#*# 	  -0.108388, -0.099946, -0.096617, -0.094423, -0.086615, -0.083190, -0.081202, -0.069867, -0.068734, -0.062327, -0.056292, -0.054720, -0.050154, -0.043376, -0.043049, -0.036596, -0.030218, -0.028491, -0.022700, -0.019989, -0.015390, -0.012340, -0.008892, -0.007145
#*# 	  -0.110826, -0.104947, -0.102009, -0.096868, -0.091552, -0.088124, -0.081861, -0.076279, -0.076241, -0.069154, -0.063259, -0.057572, -0.053176, -0.050962, -0.048269, -0.040708, -0.037709, -0.034899, -0.029564, -0.023418, -0.020843, -0.018123, -0.016301, -0.015119
#*# 	  -0.116022, -0.109673, -0.104480, -0.099066, -0.096393, -0.090382, -0.083242, -0.079650, -0.076728, -0.072051, -0.069643, -0.062928, -0.058937, -0.056024, -0.049688, -0.043358, -0.040673, -0.036272, -0.032357, -0.025208, -0.022892, -0.023366, -0.023224, -0.016632
#*# 	  -0.118570, -0.116767, -0.110328, -0.103984, -0.102131, -0.098415, -0.092759, -0.087984, -0.082107, -0.078173, -0.075276, -0.068325, -0.063288, -0.059665, -0.055686, -0.050989, -0.047066, -0.041960, -0.037355, -0.036112, -0.031151, -0.028978, -0.028271, -0.023399
#*# 	  -0.124459, -0.121117, -0.117079, -0.112347, -0.108193, -0.103577, -0.097196, -0.093370, -0.088752, -0.081635, -0.078674, -0.074566, -0.069582, -0.064251, -0.061302, -0.056292, -0.053059, -0.048140, -0.043261, -0.042737, -0.036602, -0.035454, -0.031530, -0.029864
#*# 	  -0.129950, -0.123855, -0.116930, -0.111269, -0.110141, -0.109101, -0.101748, -0.096643, -0.090489, -0.083367, -0.078818, -0.076139, -0.074089, -0.068807, -0.063035, -0.057999, -0.056711, -0.053134, -0.048918, -0.043150, -0.042748, -0.037538, -0.036546, -0.035275
#*# 	  -0.132206, -0.127831, -0.123154, -0.116612, -0.112511, -0.109905, -0.102573, -0.096599, -0.096146, -0.089984, -0.083497, -0.081273, -0.076526, -0.073105, -0.069659, -0.063687, -0.058438, -0.056313, -0.050363, -0.047909, -0.043802, -0.041970, -0.038167, -0.036787
#*# 	  -0.131352, -0.129624, -0.123690, -0.120196, -0.115236, -0.114217, -0.106614, -0.101967, -0.096786, -0.091482, -0.089044, -0.083036, -0.079008, -0.076601, -0.070567, -0.069548, -0.063726, -0.058817, -0.054873, -0.053040, -0.048095, -0.046247, -0.043136, -0.041524
#*# 	  -0.136930, -0.130418, -0.129277, -0.123603, -0.119692, -0.115924, -0.109296, -0.103483, -0.103056, -0.097158, -0.092020, -0.086353, -0.083192, -0.077917, -0.074646, -0.070205, -0.067291, -0.064389, -0.060283, -0.056416, -0.052209, -0.049150, -0.045850, -0.044348
#*# 	  -0.142492, -0.136744, -0.131989, -0.124177, -0.122679, -0.116842, -0.110077, -0.109672, -0.105780, -0.100017, -0.096120, -0.089903, -0.089274, -0.084355, -0.079726, -0.076498, -0.073184, -0.068334, -0.063054, -0.062715, -0.056347, -0.050148, -0.050679, -0.049667
#*# 	  -0.144560, -0.138005, -0.137277, -0.133235, -0.129709, -0.123478, -0.116775, -0.113365, -0.110201, -0.104578, -0.100778, -0.096633, -0.091884, -0.086627, -0.082829, -0.079951, -0.076395, -0.071308, -0.068743, -0.062635, -0.062063, -0.057573, -0.053086, -0.052629
#*# 	  -0.147902, -0.143985, -0.141407, -0.130563, -0.130598, -0.127782, -0.120994, -0.113551, -0.113205, -0.107961, -0.103389, -0.098268, -0.096378, -0.090151, -0.084111, -0.082842, -0.078244, -0.074632, -0.070224, -0.066748, -0.064703, -0.062957, -0.057884, -0.056659
#*# 	  -0.151980, -0.147413, -0.143725, -0.137567, -0.133689, -0.130329, -0.123301, -0.118754, -0.118195, -0.112635, -0.108507, -0.103392, -0.098026, -0.096467, -0.092265, -0.085694, -0.083336, -0.081289, -0.075539, -0.071554, -0.064849, -0.064710, -0.062969, -0.062949
#*# 	  -0.157863, -0.152215, -0.145627, -0.144244, -0.144015, -0.137579, -0.130466, -0.126139, -0.123374, -0.118637, -0.112610, -0.108921, -0.105349, -0.103313, -0.096878, -0.094878, -0.089830, -0.087600, -0.082479, -0.079479, -0.076131, -0.073129, -0.070224, -0.066452
#*# 	  -0.164019, -0.157679, -0.153492, -0.150864, -0.144299, -0.140600, -0.137725, -0.131988, -0.130621, -0.122644, -0.116633, -0.113459, -0.109228, -0.105739, -0.102630, -0.099004, -0.096478, -0.089344, -0.086435, -0.083142, -0.079582, -0.077093, -0.072899, -0.072754
#*# x_count = 24
#*# y_count = 17
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 89.2843
#*# min_y = 41.8336
#*# max_y = 75.6336
