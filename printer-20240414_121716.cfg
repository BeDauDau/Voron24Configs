## Voron Design VORON2.4  300mm  MKS Monster8 V1.0 TMC2209 UART config
[include MACHINE/machine.cfg]
[include KAMP/*cfg]
#[include KLICKY/klicky-probe.cfg]
[include MACROS/macros.cfg]
#[include Expander.cfg]
[include timelapse.cfg]

[pause_resume]

[display_status]

[respond]

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT


[exclude_object]


[force_move]
enable_force_move: True


#####################################################################
#	MCU
#####################################################################

#	MCU
[mcu]
canbus_uuid: 0ee53ec05d88


#	MCU EBBCan
[mcu EBBCan]
canbus_uuid: 5ee53906b31d
#serial:/dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.3:1.0
#restart_method: command

[mcu rpi]
serial: /tmp/klipper_host_mcu
[idm]
serial:/dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.2:1.0

#   Path to the serial port for the idm device. Typically has the form
#   /dev/serial/by-id/usb-idm_idm_...
#canbus_uuid:
speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of idm from the nozzle.
y_offset: 21.1
#   Y offset of idm from the nozzle.
trigger_distance: 2.
#   idm trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default idm model to load.
mesh_main_direction: x
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

#####################################################################
#	Temperature
#####################################################################

#	Raspberry Pi
[temperature_sensor raspberry_pi]
sensor_type:        temperature_host
min_temp:                       0
max_temp:                       80


#	EBB NTC
[temperature_sensor EBB_NTC]
sensor_type: Generic 3950
sensor_pin: EBBCan: PA2

#	Chamber
[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PC0
min_temp: 0
max_temp: 100
gcode_id: C
#####################################################################
#	Input Shaper
#####################################################################

[input_shaper]
#shaper_freq_x: 46.0
#shaper_type_x: zv
#shaper_freq_y: 28.8
#shaper_type_y: mzv


[lis2dw]
cs_pin: idm:PA3
spi_bus: spi1

[resonance_tester]
accel_chip: lis2dw
probe_points:
    150, 150, 20  #set your prefered calibrating position

#####################################################################
#	Printer
#####################################################################
[printer]
kinematics: corexy
max_velocity: 600  
max_accel: 10000   			#Max 4000
max_z_velocity: 30			#Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
square_corner_velocity: 8.0
max_accel_to_decel: 5000


#####################################################################
#   Extruder
#####################################################################

[extruder]

## PID Tuning
#control : pid  
#pid_kp : 26.213 
#pid_ki : 1.304
#pid_kd : 131.721 


#--------------------------------------------------------------------


[heater_bed]
heater_pin: PB10
sensor_type: Generic 3950
sensor_pin: PC1

## PID Tuning
#control: pid
#pid_Kp: 42.066
#pid_Ki: 1.659
#pid_Kd: 266.595

max_power: 0.65
min_temp: 0
max_temp: 120

#####################################################################
#	Save Config
#####################################################################

[include moonraker_obico_macros.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 29.554
#*# pid_ki = 3.079
#*# pid_kd = 70.932
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 34.627
#*# pid_ki = 1.297
#*# pid_kd = 231.133
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 51.8
#*# shaper_type_y = mzv
#*# shaper_freq_y = 36.4
#*#
#*# [stepper_z]
#*# position_endstop = -0.126
#*#
#*# [idm model default]
#*# model_coef = 1.4110361854613407,
#*# 	1.8327668461038886,
#*# 	0.7850035833443602,
#*# 	0.4464269285216583,
#*# 	0.31293082159171426,
#*# 	0.11331366634866692,
#*# 	-0.19370030847133393,
#*# 	-0.04004480778342254,
#*# 	0.2364677939618609,
#*# 	0.10065496772926166
#*# model_domain = 3.263845529478819e-07,3.3572127939017744e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 40.907022
#*# model_offset = -0.15000
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.095547, -0.090499, -0.084404, -0.079600, -0.075126, -0.069488, -0.066324, -0.061539, -0.054009, -0.051567, -0.047659, -0.044224, -0.041003, -0.032175, -0.030775, -0.026863, -0.021919, -0.018701, -0.015154
#*# 	  -0.096902, -0.090470, -0.085836, -0.080847, -0.076346, -0.070000, -0.065533, -0.061566, -0.055885, -0.051898, -0.047746, -0.043904, -0.040620, -0.035483, -0.032984, -0.027092, -0.023965, -0.020984, -0.019064
#*# 	  -0.100233, -0.095341, -0.090420, -0.085485, -0.081400, -0.076866, -0.070600, -0.065697, -0.061058, -0.057259, -0.051901, -0.049257, -0.045192, -0.040173, -0.035722, -0.031954, -0.028145, -0.025187, -0.021814
#*# 	  -0.105178, -0.100277, -0.093691, -0.089276, -0.085291, -0.079258, -0.075025, -0.071595, -0.066978, -0.061026, -0.055997, -0.054229, -0.049342, -0.044838, -0.040953, -0.037746, -0.033741, -0.030008, -0.025763
#*# 	  -0.108435, -0.102925, -0.098062, -0.091763, -0.087279, -0.082441, -0.076841, -0.072935, -0.068970, -0.063711, -0.059472, -0.055209, -0.051281, -0.046248, -0.042537, -0.039086, -0.034412, -0.031003, -0.028807
#*# 	  -0.110529, -0.105160, -0.099898, -0.094858, -0.090184, -0.084684, -0.079975, -0.075798, -0.072111, -0.068276, -0.063713, -0.058785, -0.055738, -0.051737, -0.048396, -0.043738, -0.040195, -0.038180, -0.033550
#*# 	  -0.115447, -0.108440, -0.103852, -0.098964, -0.092894, -0.089424, -0.085248, -0.079670, -0.075830, -0.070274, -0.066838, -0.062280, -0.059088, -0.054611, -0.050768, -0.046475, -0.043791, -0.040352, -0.037258
#*# 	  -0.118193, -0.112007, -0.109352, -0.102885, -0.098847, -0.094914, -0.089130, -0.085568, -0.081056, -0.075810, -0.072163, -0.068630, -0.064668, -0.060330, -0.057624, -0.052857, -0.050026, -0.047253, -0.043251
#*# 	  -0.120382, -0.115858, -0.110234, -0.105953, -0.100565, -0.096425, -0.091420, -0.085930, -0.082249, -0.078724, -0.073945, -0.069283, -0.065871, -0.061279, -0.057767, -0.053124, -0.051348, -0.047879, -0.045321
#*# 	  -0.121500, -0.115013, -0.111996, -0.106874, -0.103256, -0.098973, -0.093205, -0.089776, -0.085413, -0.080618, -0.077275, -0.072735, -0.070396, -0.065145, -0.061255, -0.058587, -0.055270, -0.051844, -0.048491
#*# 	  -0.121791, -0.116764, -0.111349, -0.109381, -0.103441, -0.098468, -0.094963, -0.090575, -0.086683, -0.082263, -0.077837, -0.074955, -0.069938, -0.066716, -0.062795, -0.058320, -0.057277, -0.052474, -0.050939
#*# 	  -0.125265, -0.120900, -0.116510, -0.112088, -0.108473, -0.104415, -0.099848, -0.094595, -0.091361, -0.087322, -0.084318, -0.078785, -0.076657, -0.072462, -0.068349, -0.065802, -0.062679, -0.060729, -0.056205
#*# 	  -0.130968, -0.125942, -0.122152, -0.117337, -0.111533, -0.108841, -0.104216, -0.099222, -0.095300, -0.090826, -0.088105, -0.083741, -0.080812, -0.076507, -0.072814, -0.068624, -0.065234, -0.062599, -0.060442
#*# 	  -0.131029, -0.125880, -0.122302, -0.119194, -0.113465, -0.108984, -0.105832, -0.101734, -0.098219, -0.093948, -0.089461, -0.085820, -0.083323, -0.077377, -0.075265, -0.072264, -0.068641, -0.065999, -0.064472
#*# 	  -0.132905, -0.127300, -0.123323, -0.119918, -0.115686, -0.112915, -0.108020, -0.104320, -0.100321, -0.096268, -0.092638, -0.089059, -0.085800, -0.080697, -0.077816, -0.075600, -0.072944, -0.068877, -0.068120
#*# x_count = 19
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 79.3041
#*# min_y = 40.0
#*# max_y = 70.5574
